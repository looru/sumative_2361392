AHDS Assessment Pipeline â€” Student 2361392

This repository contains the full reproducible workflow for the AHDS assessment, including data collection, cleaning, text mining, topic modelling, and visualisation. The workflow was implemented using Snakemake, Bash, and R (tidyverse + tidytext) and is designed to run both locally and on the BluePebble HPC cluster.

1. Project Overview

The aim of this pipeline is to:

-Download PubMed article metadata based on predefined search terms.

-Extract titles, publication years, and abstracts from XML.

-Perform text preprocessing (tokenisation, cleaning, stopword removal).

-Analyse trends in key terms over time (e.g., gaming, addiction, internet, smartphone).

-Generate topic models using Latent Dirichlet Allocation (LDA).

-Visualise changes in topics and key term frequencies across years.

The workflow is entirely automated using Snakemake, enabling reproducibility and portability.

2. Directory Structure
AHDS_assessment_2361392/
â”‚
â”œâ”€â”€ code/                     # All R scripts and Bash scripts used in the pipeline
â”‚   â”œâ”€â”€ download_pubmed.sh
â”‚   â”œâ”€â”€ parse_xml.R
â”‚   â”œâ”€â”€ tidy_text_processing.R
â”‚   â”œâ”€â”€ lda_topic_model.R
â”‚   â”œâ”€â”€ word_trends_forecast.R
â”‚
â”‚
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ raw/                  # raw XML files downloaded here
â”‚   â”œâ”€â”€ clean/                # Intermediate files such as token tables, matricesâ”‚
â”‚
â”œâ”€â”€ figures/                  # PNG visualisations generated by R scripts
â”‚
â”œâ”€â”€ Snakefile                 # The core workflow definition
â”œâ”€â”€ config.yaml               # Snakemake profile for BluePebble (cluster settings)
â”œâ”€â”€ workflow_config.yaml      # Pipeline parameters (search terms, test mode, etc.)
â”œâ”€â”€ env_2361392.yml           # Cross-platform Conda environment 
â””â”€â”€ README.md                 # Project documentation

3. Conda Environment

To ensure reproducibility, the pipeline uses a cross-platform Conda environment:

conda env create -f env_2361392.yml
conda activate env_2361392

This environment provides:

-R (tidyverse, tidytext, topicmodels)

-Snakemake 7+

-wordcloud, text mining tools

-xml2 for parsing PubMed files

4. Running the Pipeline on BluePebble

Step 1 â€” Loading Conda
source ~/initConda.sh
conda activate env_2361392

Step 2 â€” Running Snakemake

The pipeline is executed with:

snakemake --profile .

If test: true is enabled in workflow_config.yaml, the pipeline processes only 20 articles for rapid testing.
If test: false, it processes all downloaded articles.

5. Summary of the pipeline design

We implemented a Snakemake-based workflow with a configurable test mode enabling rapid development. The pipeline is modular, with separate rules for:

-Downloading PubMed article XML files

-Extracting metadata (PMID, year, title, abstract)

-Cleaning and tokenising text data

-Producing word frequency summaries

-Generating time-trend visualisations

-Fitting and plotting a Latent Dirichlet Allocation (LDA) model

-All steps use Bash and/or R scripts, with conda-managed environments ensuring reproducibility.

6. Key Outputs

The workflow produces:

ðŸ”¹ Clean Data

-pmid_year_title_abstract.tsv

-tokenised word tables

-cleaned abstracts

ðŸ”¹ Visualisations

-word_trends.png â€” trends in key terms across years

-word_trends_forecast.png â€” predicted trends

ðŸ”¹ Topic Modelling

LDA topics with human-readable names:

-Clinical Assessment

-Gaming Disorder

-Smartphone & Social Media Use

-Mental Health Effects

-Epidemiology & Population Studies

7. Test Mode

In workflow_config.yaml:

test: true
test_n: 20

When testing is enabled, a subset of 20 articles is processed.
Set test: false for full analysis.

8. Reproducibility and Version Control

This repository includes:

- .git version tracking

- meaningful commit messages

- environment files

- complete workflow scripts

- The final submitted ZIP file excludes raw data, ensuring size < 1GB.

9. Citation

Wickham, H., & Grolemund, G. (2023). R for Data Science (2e).

Silge, J., & Robinson, D. (2016). Text Mining with R.

